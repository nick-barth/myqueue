import{S as ne,i as oe,s as ie,k as v,l as w,m as A,h as c,n as u,b as E,d as P,f as V,g as T,H as Z,v as M,q as x,r as N,I as y,J as D,a as j,y as z,c as q,z as F,A as Q,U as ue,B as J,T as le,u as ce}from"../chunks/index.485fcb8d.js";import{g as fe}from"../chunks/navigation.eb682a3d.js";import{B as pe}from"../chunks/button.a5101224.js";import{o as me,s as ee,c as de,S as he,A as ye,G as _e,v as ge}from"../chunks/index.bdf73970.js";import{s as be,d as te}from"../chunks/db.a3b95309.js";import{C as ke}from"../chunks/index.e036d59b.js";function ve(i){let e,t;return{c(){e=v("div"),t=x(`Hey! Thank you for signing up, but first you have to verify your email address. We sent you an
			email, click on the link to start listening.`),this.h()},l(s){e=w(s,"DIV",{class:!0});var n=A(e);t=N(n,`Hey! Thank you for signing up, but first you have to verify your email address. We sent you an
			email, click on the link to start listening.`),n.forEach(c),this.h()},h(){u(e,"class","flex text-center")},m(s,n){E(s,e,n),y(e,t)},p:D,i:D,o:D,d(s){s&&c(e)}}}function we(i){let e,t,s,n,f,l,_,r,o,g,$,O,I,L,C,p,B,U,S,G,H,R,K,m=i[3]&&se(i),d=!i[3]&&re(i);S=new pe({props:{isLoading:i[0],isDisabled:i[4]&&!i[5],type:"submit",$$slots:{default:[$e]},$$scope:{ctx:i}}});let b=i[2]&&ae(i);return{c(){m&&m.c(),e=j(),d&&d.c(),t=j(),s=v("span"),n=x("OR"),f=j(),l=v("form"),_=v("input"),r=j(),o=v("input"),g=j(),$=v("p"),O=x("By creating your account, you agree to My Queue's "),I=v("a"),L=x("Terms of Service"),C=x(`
				and
				`),p=v("a"),B=x("Privacy policy"),U=j(),z(S.$$.fragment),G=j(),b&&b.c(),this.h()},l(a){m&&m.l(a),e=q(a),d&&d.l(a),t=q(a),s=w(a,"SPAN",{class:!0});var h=A(s);n=N(h,"OR"),h.forEach(c),f=q(a),l=w(a,"FORM",{class:!0});var k=A(l);_=w(k,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),r=q(k),o=w(k,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),g=q(k),$=w(k,"P",{class:!0});var W=A($);O=N(W,"By creating your account, you agree to My Queue's "),I=w(W,"A",{class:!0,target:!0,href:!0});var X=A(I);L=N(X,"Terms of Service"),X.forEach(c),C=N(W,`
				and
				`),p=w(W,"A",{class:!0,target:!0,href:!0});var Y=A(p);B=N(Y,"Privacy policy"),Y.forEach(c),W.forEach(c),U=q(k),F(S.$$.fragment,k),G=q(k),b&&b.l(k),k.forEach(c),this.h()},h(){u(s,"class","flex self-center my-4 text-sm"),u(_,"class","h-12 mb-2 pl-4 w-full flex justify-center items-center text-primary rounded-primary border border-gray-300 bg-background"),u(_,"name","email"),u(_,"type","email"),u(_,"placeholder","Email"),_.required=!0,u(o,"class","h-12 mb-2 pl-4 w-full flex justify-center items-center text-primary rounded-primary border border-gray-300 bg-background"),u(o,"name","password"),u(o,"type","password"),u(o,"placeholder","Password"),o.required=!0,u(I,"class","underline"),u(I,"target","_blank"),u(I,"href","https://myqueue.so/tos"),u(p,"class","underline"),u(p,"target","_blank"),u(p,"href","https://myqueue.so/privacy-policy"),u($,"class","px-4 text-xs"),u(l,"class","flex gap-4 flex-col")},m(a,h){m&&m.m(a,h),E(a,e,h),d&&d.m(a,h),E(a,t,h),E(a,s,h),y(s,n),E(a,f,h),E(a,l,h),y(l,_),y(l,r),y(l,o),y(l,g),y(l,$),y($,O),y($,I),y(I,L),y($,C),y($,p),y(p,B),y(l,U),Q(S,l,null),y(l,G),b&&b.m(l,null),H=!0,R||(K=ue(i[6].call(null,l)),R=!0)},p(a,h){a[3]?m?(m.p(a,h),h&8&&T(m,1)):(m=se(a),m.c(),T(m,1),m.m(e.parentNode,e)):m&&(M(),P(m,1,1,()=>{m=null}),V()),a[3]?d&&(M(),P(d,1,1,()=>{d=null}),V()):d?(d.p(a,h),h&8&&T(d,1)):(d=re(a),d.c(),T(d,1),d.m(t.parentNode,t));const k={};h&1&&(k.isLoading=a[0]),h&48&&(k.isDisabled=a[4]&&!a[5]),h&8192&&(k.$$scope={dirty:h,ctx:a}),S.$set(k),a[2]?b?b.p(a,h):(b=ae(a),b.c(),b.m(l,null)):b&&(b.d(1),b=null)},i(a){H||(T(m),T(d),T(S.$$.fragment,a),H=!0)},o(a){P(m),P(d),P(S.$$.fragment,a),H=!1},d(a){m&&m.d(a),a&&c(e),d&&d.d(a),a&&c(t),a&&c(s),a&&c(f),a&&c(l),J(S),b&&b.d(),R=!1,K()}}}function se(i){let e,t,s,n,f,l,_;return s=new ye({}),{c(){e=v("button"),t=v("span"),z(s.$$.fragment),n=x(`
				Continue with Apple`),this.h()},l(r){e=w(r,"BUTTON",{class:!0});var o=A(e);t=w(o,"SPAN",{class:!0});var g=A(t);F(s.$$.fragment,g),g.forEach(c),n=N(o,`
				Continue with Apple`),o.forEach(c),this.h()},h(){u(t,"class","h-6 w-6 mr-2 flex flex-end"),u(e,"class","h-12 gap-2 mb-4 w-full flex justify-center items-center text-primary rounded-primary border border-primary")},m(r,o){E(r,e,o),y(e,t),Q(s,t,null),y(e,n),f=!0,l||(_=le(e,"click",i[9]),l=!0)},p:D,i(r){f||(T(s.$$.fragment,r),f=!0)},o(r){P(s.$$.fragment,r),f=!1},d(r){r&&c(e),J(s),l=!1,_()}}}function re(i){let e,t,s,n,f,l,_;return s=new _e({}),{c(){e=v("button"),t=v("span"),z(s.$$.fragment),n=x(`
				Sign up with google`),this.h()},l(r){e=w(r,"BUTTON",{class:!0});var o=A(e);t=w(o,"SPAN",{class:!0});var g=A(t);F(s.$$.fragment,g),g.forEach(c),n=N(o,`
				Sign up with google`),o.forEach(c),this.h()},h(){u(t,"class","h-6 w-6 mr-2"),u(e,"class","h-12 gap-2 w-full flex justify-center items-center text-primary rounded-primary border border-primary")},m(r,o){E(r,e,o),y(e,t),Q(s,t,null),y(e,n),f=!0,l||(_=le(e,"click",i[10]),l=!0)},p:D,i(r){f||(T(s.$$.fragment,r),f=!0)},o(r){P(s.$$.fragment,r),f=!1},d(r){r&&c(e),J(s),l=!1,_()}}}function $e(i){let e;return{c(){e=x("Create my free account")},l(t){e=N(t,"Create my free account")},m(t,s){E(t,e,s)},d(t){t&&c(e)}}}function ae(i){let e,t;return{c(){e=v("div"),t=x(i[2]),this.h()},l(s){e=w(s,"DIV",{class:!0});var n=A(e);t=N(n,i[2]),n.forEach(c),this.h()},h(){u(e,"class","flex text-red-500 justify-center")},m(s,n){E(s,e,n),y(e,t)},p(s,n){n&4&&ce(t,s[2])},d(s){s&&c(e)}}}function Ae(i){let e,t,s,n;const f=[we,ve],l=[];function _(r,o){return r[1]?1:0}return t=_(i),s=l[t]=f[t](i),{c(){e=v("section"),s.c(),this.h()},l(r){e=w(r,"SECTION",{class:!0});var o=A(e);s.l(o),o.forEach(c),this.h()},h(){u(e,"class","max-w-[448px] w-full flex m-auto justify-center flex-col")},m(r,o){E(r,e,o),l[t].m(e,null),n=!0},p(r,[o]){let g=t;t=_(r),t===g?l[t].p(r,o):(M(),P(l[g],1,1,()=>{l[g]=null}),V(),s=l[t],s?s.p(r,o):(s=l[t]=f[t](r),s.c()),T(s,1),s.m(e,null))},i(r){n||(T(s),n=!0)},o(r){P(s),n=!1},d(r){r&&c(e),l[t].d()}}}function Se(i,e,t){let s,n,f=!1,l=!1;const _=me({email:ee().email().nonempty(),password:ee().nonempty().min(6)});let r;const{form:o,isValid:g,touched:$}=de({extend:ge({schema:_}),onSubmit:async p=>{t(0,f=!0),(await te.signUp(p.email,p.password)).error?t(2,r="Invalid credentials"):t(1,l=!0),t(0,f=!1)}});Z(i,g,p=>t(5,n=p)),Z(i,$,p=>t(4,s=p));const O=async p=>{const B=new TextEncoder().encode(p),U=await crypto.subtle.digest("SHA-256",B);return Array.from(new Uint8Array(U)).map(H=>H.toString(16).padStart(2,"0")).join("")},I=async()=>{const p="nonce";let U={clientId:"so.play.myqueue",redirectURI:"https://play.myqueue.so/",scopes:"email name",state:"12345",nonce:await O(p)};const S=await he.authorize(U);await be.auth.signInWithIdToken({provider:"apple",token:S.response.identityToken,nonce:p}),fe("/")},L=async()=>{await te.signInWithGoogle()};let C=!1;return ke.getPlatform()==="ios"&&(C=!0),[f,l,r,C,s,n,o,g,$,I,L]}class Be extends ne{constructor(e){super(),oe(this,e,Se,Ae,ie,{})}}export{Be as default};
