import{S as X,i as Y,s as Z,k as $,a as N,q as B,y as G,l as k,m as v,c as j,r as U,h as y,z as H,n as h,b as q,I as g,A as O,U as ee,g as A,d as x,f as R,B as L,H as te,T as K,J as Q,u as se,v as D}from"../chunks/index.485fcb8d.js";import{g as V}from"../chunks/navigation.eb682a3d.js";import{o as ae,s as W,c as re,A as ne,G as oe,S as le,v as ie}from"../chunks/index.bdf73970.js";import{s as ce,d as z}from"../chunks/db.a3b95309.js";import{B as fe}from"../chunks/button.a5101224.js";import{C as ue}from"../chunks/index.e036d59b.js";function F(i){let e,t,s,r,u,_,n;return s=new ne({}),{c(){e=$("button"),t=$("span"),G(s.$$.fragment),r=B(`
			Continue with Apple`),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var p=v(e);t=k(p,"SPAN",{class:!0});var m=v(t);H(s.$$.fragment,m),m.forEach(y),r=U(p,`
			Continue with Apple`),p.forEach(y),this.h()},h(){h(t,"class","h-6 w-6 mr-2 flex flex-end"),h(e,"class","h-12 gap-2 mb-4 w-full flex justify-center items-center text-primary rounded-primary border border-primary")},m(a,p){q(a,e,p),g(e,t),O(s,t,null),g(e,r),u=!0,_||(n=K(e,"click",i[6]),_=!0)},p:Q,i(a){u||(A(s.$$.fragment,a),u=!0)},o(a){x(s.$$.fragment,a),u=!1},d(a){a&&y(e),L(s),_=!1,n()}}}function J(i){let e,t,s,r,u,_,n;return s=new oe({}),{c(){e=$("button"),t=$("span"),G(s.$$.fragment),r=B(`
			Continue with Google`),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var p=v(e);t=k(p,"SPAN",{class:!0});var m=v(t);H(s.$$.fragment,m),m.forEach(y),r=U(p,`
			Continue with Google`),p.forEach(y),this.h()},h(){h(t,"class","h-6 w-6 mr-2"),h(e,"class","h-12 gap-2 w-full flex justify-center items-center text-primary rounded-primary border border-primary")},m(a,p){q(a,e,p),g(e,t),O(s,t,null),g(e,r),u=!0,_||(n=K(e,"click",i[7]),_=!0)},p:Q,i(a){u||(A(s.$$.fragment,a),u=!0)},o(a){x(s.$$.fragment,a),u=!1},d(a){a&&y(e),L(s),_=!1,n()}}}function pe(i){let e;return{c(){e=B("Sign in")},l(t){e=U(t,"Sign in")},m(t,s){q(t,e,s)},d(t){t&&y(e)}}}function M(i){let e,t;return{c(){e=$("div"),t=B(i[1]),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=v(e);t=U(r,i[1]),r.forEach(y),this.h()},h(){h(e,"class","flex text-red-500 justify-center")},m(s,r){q(s,e,r),g(e,t)},p(s,r){r&2&&se(t,s[1])},d(s){s&&y(e)}}}function me(i){let e,t,s,r,u,_,n,a,p,m,C,w,b,I,T,P,c=i[2]&&F(i),o=!i[2]&&J(i);w=new fe({props:{isLoading:i[0],type:"submit",isDisabled:!i[3],$$slots:{default:[pe]},$$scope:{ctx:i}}});let d=i[1]&&M(i);return{c(){e=$("section"),c&&c.c(),t=N(),o&&o.c(),s=N(),r=$("span"),u=B("OR"),_=N(),n=$("form"),a=$("input"),p=N(),m=$("input"),C=N(),G(w.$$.fragment),b=N(),d&&d.c(),this.h()},l(l){e=k(l,"SECTION",{class:!0});var f=v(e);c&&c.l(f),t=j(f),o&&o.l(f),s=j(f),r=k(f,"SPAN",{class:!0});var E=v(r);u=U(E,"OR"),E.forEach(y),_=j(f),n=k(f,"FORM",{class:!0});var S=v(n);a=k(S,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),p=j(S),m=k(S,"INPUT",{class:!0,name:!0,type:!0,placeholder:!0}),C=j(S),H(w.$$.fragment,S),b=j(S),d&&d.l(S),S.forEach(y),f.forEach(y),this.h()},h(){h(r,"class","flex self-center my-4 text-sm"),h(a,"class","h-12 mb-2 pl-4 w-full flex justify-center items-center text-primary rounded-primary border border-gray-300 bg-background"),h(a,"name","email"),h(a,"type","email"),h(a,"placeholder","Email"),a.required=!0,h(m,"class","h-12 mb-2 pl-4 w-full flex justify-center items-center text-primary rounded-primary border border-gray-300 bg-background"),h(m,"name","password"),h(m,"type","password"),h(m,"placeholder","Password"),m.required=!0,h(n,"class","flex gap-4 flex-col"),h(e,"class","max-w-[448px] w-full flex m-auto justify-center flex-col")},m(l,f){q(l,e,f),c&&c.m(e,null),g(e,t),o&&o.m(e,null),g(e,s),g(e,r),g(r,u),g(e,_),g(e,n),g(n,a),g(n,p),g(n,m),g(n,C),O(w,n,null),g(n,b),d&&d.m(n,null),I=!0,T||(P=ee(i[4].call(null,n)),T=!0)},p(l,[f]){l[2]?c?(c.p(l,f),f&4&&A(c,1)):(c=F(l),c.c(),A(c,1),c.m(e,t)):c&&(D(),x(c,1,1,()=>{c=null}),R()),l[2]?o&&(D(),x(o,1,1,()=>{o=null}),R()):o?(o.p(l,f),f&4&&A(o,1)):(o=J(l),o.c(),A(o,1),o.m(e,s));const E={};f&1&&(E.isLoading=l[0]),f&8&&(E.isDisabled=!l[3]),f&1024&&(E.$$scope={dirty:f,ctx:l}),w.$set(E),l[1]?d?d.p(l,f):(d=M(l),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},i(l){I||(A(c),A(o),A(w.$$.fragment,l),I=!0)},o(l){x(c),x(o),x(w.$$.fragment,l),I=!1},d(l){l&&y(e),c&&c.d(),o&&o.d(),L(w),d&&d.d(),T=!1,P()}}}function de(i,e,t){let s;const r=ae({email:W().email().nonempty(),password:W().nonempty().min(6)});let u=!1,_;const{form:n,isValid:a}=re({extend:ie({schema:r}),onSubmit:async b=>{t(0,u=!0),(await z.signIn(b.email,b.password)).error?t(1,_="Invalid credentials"):V("/"),t(0,u=!1)}});te(i,a,b=>t(3,s=b));const p=async b=>{const I=new TextEncoder().encode(b),T=await crypto.subtle.digest("SHA-256",I);return Array.from(new Uint8Array(T)).map(o=>o.toString(16).padStart(2,"0")).join("")},m=async()=>{const b="nonce";let T={clientId:"so.play.myqueue",redirectURI:"https://play.myqueue.so",scopes:"email name",state:"12345",nonce:await p(b)};const P=await le.authorize(T);await ce.auth.signInWithIdToken({provider:"apple",token:P.response.identityToken,nonce:b}),V("/")},C=async()=>{await z.signInWithGoogle()};let w=!1;return ue.getPlatform()==="ios"&&(w=!0),[u,_,w,s,n,a,m,C]}class $e extends X{constructor(e){super(),Y(this,e,de,me,Z,{})}}export{$e as default};
